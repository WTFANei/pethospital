webpackJsonp([7],{FVTc:function(t,e){},mCBZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("NYxO");var n={data:function(){return{searchParam:{},currentPage:1,totalCount:0,tableData:[]}},created:function(){this.searchParam.param=this.$route.query.cid,this.getData()},methods:{handleCurrentChange:function(t){this.searchParam.page=t-1,this.currentPage=t,this.getData()},handleDelete:function(t,e){document.querySelector("#app").click();var a=this;this.$ajax.post("/api/deleteSection?id="+e.sid).then(function(t){0===t.data.code&&a.$message({message:t.data.data,type:"success"}),a.getData()}).catch(function(t){console.log(t)})},dateFormat:function(t,e){return this.getDateTime(t[e.property])},getData:function(){var t=this;this.$ajax.post("/api/getSection",t.searchParam).then(function(e){t.tableData=e.data.data.content,t.totalCount=e.data.data.totalElements,console.log(e.data)}).catch(function(t){console.log(t)})},cancel:function(){document.querySelector("#app").click()},goLink:function(t,e,a,n){this.$router.push({path:t,query:{cid:e,id:a,n:n}})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"banaer"},[a("div",{staticClass:"container"},[a("div",{staticClass:"head"},[t._v("漫画 — "+t._s(t.$route.query.n)+"\n        "),a("span",{staticClass:"add"},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){t.goLink("/pubchapter",t.$route.query.cid,null,t.$route.query.n)}}},[a("i",{staticClass:"el-icon-upload",staticStyle:{"font-size":"16px"}},[t._v("上传")])])],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-form",{attrs:{"label-position":"left"}},[a("el-form-item",{attrs:{label:"预览"}},[a("img",{attrs:{src:t.row.content,width:"800"}})])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"序号"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.state?a("a",[t._v("第"+t._s(e.row.chapter)+"章")]):a("a",{on:{click:function(a){t.goLink("/pubchapter",t.$route.query.cid,e.row.sid,t.$route.query.n)}}},[t._v("第"+t._s(e.row.chapter)+"章")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"章节",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.flag?a("el-tag",{attrs:{color:"#F0F8FF",type:"info"}},[t._v("发布")]):t._e(),t._v(" "),e.row.flag?t._e():a("el-tag",{attrs:{color:"#FFF5EE",type:"info"}},[t._v("存稿")]),t._v(" "),e.row.flag&&e.row.state?a("el-tag",{attrs:{color:"#F0F8FF",type:"info"}},[t._v("通过")]):t._e(),t._v(" "),e.row.flag&&!e.row.state?a("el-tag",{attrs:{color:"#FFF5EE",type:"info"}},[t._v("待审")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"156",getLocalTime:"",formatter:t.dateFormat,prop:"date"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{ref:"popover{{$index}}",staticClass:"aew",attrs:{placement:"top"}},[a("p",[t._v("删除 "+t._s(e.row.title)+" ？")]),t._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.cancel()}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",round:""},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("确定")])],1)]),t._v(" "),e.row.state?a("p",[a("el-tag",{attrs:{color:"#F0F8FF",type:"info"}},[t._v("已更新")])],1):a("el-button",{directives:[{name:"popover",rawName:"v-popover:popover{{$index}}",arg:"popover{{$index}}"}],attrs:{size:"mini",type:"danger"}},[a("i",{staticClass:"el-icon-delete"})])]}}])})],1),t._v(" "),a("div",{staticClass:"pager"},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==t.totalCount,expression:"totalCount!==0"}],attrs:{layout:"prev, pager, next","current-page":t.currentPage,total:t.totalCount},on:{"current-change":t.handleCurrentChange}})],1)],1)])])},staticRenderFns:[]};var r=a("VU/8")(n,o,!1,function(t){a("FVTc")},null,null);e.default=r.exports}});
//# sourceMappingURL=7.cbe2910bcbb6d29c8d16.js.map